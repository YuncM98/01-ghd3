<html>

<head>
  <title>D3 Exercise</title>
  <script src="https://d3js.org/d3.v3.min.js"></script>
</head>

<body>
  <script>
    var width = 960,
      height = 700;

    var svg = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height);

    //Data for circles and rects
    var data = [
      { "x_axis": 30, "y_axis": 30, "radius": 20, "color": "green" },
      { "x_axis": 70, "y_axis": 70, "radius": 20, "color": "purple" },
      { "x_axis": 110, "y_axis": 110, "radius": 20, "color": "red" }];


    var circles = svg.selectAll("circle").data(data).enter().append("circle");

    circles.attr("cx", function (d) { return d.x_axis; })
      .attr("cy", function (d) { return d.y_axis; })
      .attr("r", function (d) { return d.radius; })
      .attr("fill", function (d) { return d.color; });

    var rects = svg.selectAll("rect").data(data).enter().append("rect");

    rects.attr("x", function (d) { return d.x_axis + 100; })
      .attr("y", function (d) { return d.y_axis })
      .attr("width", 50)
      .attr("height", 20)
      .attr("fill", function (d) { return d.color });

    //Create line using path function
    var lineData = [{ "x": 200, "y": 5 }, { "x": 220, "y": 20 },
    { "x": 240, "y": 10 }, { "x": 260, "y": 40 },
    { "x": 280, "y": 5 }, { "x": 300, "y": 60 }];

    var createLines = d3.svg.line()
      .x(function (d) { return d.x; })
      .y(function (d) { return d.y; })
      .interpolate("linear");

    var lines = svg.append("path").attr("d", createLines(lineData))
      .attr("stroke-width", 3)
      .attr("stroke", "blue")
      .attr("fill", "none");

    //Create poly
    var polyData = [
      { "x": 0.0, "y": 25.0 },
      { "x": 8.5, "y": 23.5 },
      { "x": 13.4, "y": 21.0 },
      { "x": 19.0, "y": 15.5 }
    ];

    var changeColor = (function(){
      var currentColor = "grey";

      return function(){
        currentColor = currentColor == "grey" ? "yellow" : "grey";
        d3.select(this).style("fill", currentColor);
      }
    })();

    var xscale = d3.scale.linear()
      .domain([-30, 30])
      .range([0, 600]);

    var yscale = d3.scale.linear()
      .domain([0,50])
      .range([500, 0]);

    svg.selectAll("polygon")
      .data([polyData])
      .enter()
      .append("polygon")
      .attr("points", function (d) {
        return d.map(function (d) {
          return [xscale(d.x), yscale(d.y)].join(",");
        }).join(" ");
      })
      .attr("stroke-width", 2)
      .attr("fill", "grey")
      .on("click", changeColor);




  </script>

</body>

</html>